import{_ as m,c as u,a as e,t as p,w as n,h as a,o as d}from"./index-C23T03Zw.js";const f={name:"AssessmentFormPage",data(){return{testType:"",testTitles:{"mini-cog":"简易智力状态评估表(MINI-COG)",casi:"早期痴呆简易筛选量表（AD8）",blessed:"匹兹堡睡眠质量指数量表（PSQI）","customer-center":"客户中心"},formData:{name:"",gender:"",age:"",hospitalNumber:"",assessmentDate:""}}},created(){this.testType=this.$route.query.redirect==="customer-center"?"customer-center":this.$route.query.testType||"mini-cog"},methods:{goBack(){this.$router.go(-1)},async startAssessment(){try{const r=await fetch("http://172.22.104.102:8080/api/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(this.formData)});if(r.ok){const t=await r.json();if(t.success)if(console.log("登录用户信息:",this.formData),console.log("服务器返回数据:",t),localStorage.setItem("currentUser",JSON.stringify(this.formData)),this.$route.query.redirect)this.$router.push({name:this.$route.query.redirect});else{let l;this.testType==="casi"?l="/ad8-test":this.testType==="blessed"?l="/psqi":l="/text",this.$router.push(l)}else console.log("验证失败的用户信息:",this.formData),console.log("服务器返回错误:",t),alert("用户验证失败: "+t.message)}else throw new Error("网络响应错误")}catch(r){console.error("登录请求失败:",r),alert("登录请求失败，请稍后重试")}}}},c={class:"assessment-form-page"},g={class:"header"},y={class:"title"},D={class:"content"},h={class:"form-container"},b={class:"form-group"},v={class:"form-group"},T={class:"form-group"},k={class:"form-group"},x={class:"form-group"};function N(r,t,l,w,o,i){return d(),u("div",c,[e("div",g,[e("button",{class:"back-button",onClick:t[0]||(t[0]=(...s)=>i.goBack&&i.goBack(...s))},t[7]||(t[7]=[e("span",{class:"back-icon"},"←",-1)])),e("h1",y,p(o.testTitles[o.testType]),1)]),e("div",D,[e("div",h,[e("div",b,[t[8]||(t[8]=e("label",null,"姓名",-1)),n(e("input",{type:"text","onUpdate:modelValue":t[1]||(t[1]=s=>o.formData.name=s),placeholder:"请输入姓名"},null,512),[[a,o.formData.name]])]),e("div",v,[t[9]||(t[9]=e("label",null,"性别",-1)),n(e("input",{type:"text","onUpdate:modelValue":t[2]||(t[2]=s=>o.formData.gender=s),placeholder:"请输入性别"},null,512),[[a,o.formData.gender]])]),e("div",T,[t[10]||(t[10]=e("label",null,"年龄",-1)),n(e("input",{type:"number","onUpdate:modelValue":t[3]||(t[3]=s=>o.formData.age=s),placeholder:"请输入年龄"},null,512),[[a,o.formData.age]])]),e("div",k,[t[11]||(t[11]=e("label",null,"住院号",-1)),n(e("input",{type:"text","onUpdate:modelValue":t[4]||(t[4]=s=>o.formData.hospitalNumber=s),placeholder:"请输入住院号"},null,512),[[a,o.formData.hospitalNumber]])]),e("div",x,[t[12]||(t[12]=e("label",null,"评定日期",-1)),n(e("input",{type:"date","onUpdate:modelValue":t[5]||(t[5]=s=>o.formData.assessmentDate=s)},null,512),[[a,o.formData.assessmentDate]])])]),e("button",{class:"start-button",onClick:t[6]||(t[6]=(...s)=>i.startAssessment&&i.startAssessment(...s))}," 开始测试 ")])])}const S=m(f,[["render",N],["__scopeId","data-v-f1f41434"]]);export{S as default};
