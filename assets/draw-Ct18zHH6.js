import{_ as h,c as m,a as n,t as x,w as c,h as d,o as p}from"./index-C23T03Zw.js";const v={name:"ClockDrawingPage",data(){const s=Math.floor(Math.random()*12)+1,t=Math.random()>.5?0:30;return{targetTime:`${s}:${t.toString().padStart(2,"0")}`,canvas:null,ctx:null,userHourAngleDeg:0,userMinuteAngleDeg:0}},mounted(){this.initCanvas(),this.drawClock()},methods:{initCanvas(){this.canvas=this.$refs.canvas,this.ctx=this.canvas.getContext("2d"),this.canvas.width=400,this.canvas.height=400,this.ctx.lineWidth=2,this.ctx.strokeStyle="#000"},drawClock(){const s=this.ctx,t=this.canvas.width/2,o=this.canvas.height/2,r=150;s.clearRect(0,0,this.canvas.width,this.canvas.height),s.beginPath(),s.arc(t,o,r,0,Math.PI*2),s.stroke(),s.font="20px Arial",s.textAlign="center",s.textBaseline="middle";for(let e=1;e<=12;e++){const l=(e-3)*(Math.PI*2)/12,u=t+Math.cos(l)*(r-30),g=o+Math.sin(l)*(r-30);s.fillText(e.toString(),u,g)}const i=(this.userHourAngleDeg-90)*Math.PI/180;this.drawHand(t,o,i,60,6);const a=(this.userMinuteAngleDeg-90)*Math.PI/180;this.drawHand(t,o,a,90,4)},drawHand(s,t,o,r,i){this.ctx.beginPath(),this.ctx.moveTo(s,t),this.ctx.lineTo(s+Math.cos(o)*r,t+Math.sin(o)*r),this.ctx.lineWidth=i,this.ctx.stroke(),this.ctx.lineWidth=2},calculateExpectedScore(){const s=parseInt(sessionStorage.getItem("drawAttempts")||"0");return s===0?5:Math.max(0,5-(s-1))},submitDrawing(){console.log("当前尝试次数:",parseInt(sessionStorage.getItem("drawAttempts")||"0")),console.log("预计得分:",this.calculateExpectedScore());const[s,t]=this.targetTime.split(":").map(Number),o=(s%12+t/60)*30,r=t*6,i=Math.abs((this.userHourAngleDeg-o+180)%360-180),a=Math.abs((this.userMinuteAngleDeg-r+180)%360-180),e=parseInt(sessionStorage.getItem("drawAttempts")||"0");if(sessionStorage.setItem("drawAttempts",e),i<=10&&a<=10){const l=Math.min(5,e===1?5:Math.max(0,5-(e-1)));localStorage.setItem("drawScore",l),this.$router.push("/select")}else i<=10?alert(`时针正确(差${i.toFixed(1)}°)，分针需调整(差${a.toFixed(1)}°)`):a<=10?alert(`分针正确(差${a.toFixed(1)}°)，时针需调整(差${i.toFixed(1)}°)`):alert(`请重新调整:
时针差${i.toFixed(1)}°
分针差${a.toFixed(1)}°`)},goBack(){this.$router.go(-1)}}},w={class:"clock-drawing-page"},M={class:"header"},k={class:"instruction"},A={class:"drawing-area"},D={ref:"canvas"},b={class:"controls"},f={class:"controls"};function I(s,t,o,r,i,a){return p(),m("div",w,[n("div",M,[n("button",{class:"back-button",onClick:t[0]||(t[0]=(...e)=>a.goBack&&a.goBack(...e))},t[6]||(t[6]=[n("span",{class:"back-icon"},"←",-1)])),t[7]||(t[7]=n("h1",{class:"title"},"时钟绘制测试",-1))]),n("div",k,[n("p",null,"请调整时针和分针，使时间为 "+x(i.targetTime),1)]),n("div",A,[n("canvas",D,null,512)]),n("div",b,[n("div",null,[t[8]||(t[8]=n("label",null,"时针角度 (°)",-1)),c(n("input",{type:"range",min:"0",max:"360","onUpdate:modelValue":t[1]||(t[1]=e=>i.userHourAngleDeg=e),onInput:t[2]||(t[2]=(...e)=>a.drawClock&&a.drawClock(...e))},null,544),[[d,i.userHourAngleDeg]])]),n("div",null,[t[9]||(t[9]=n("label",null,"分针角度 (°)",-1)),c(n("input",{type:"range",min:"0",max:"360","onUpdate:modelValue":t[3]||(t[3]=e=>i.userMinuteAngleDeg=e),onInput:t[4]||(t[4]=(...e)=>a.drawClock&&a.drawClock(...e))},null,544),[[d,i.userMinuteAngleDeg]])])]),n("div",f,[n("button",{class:"submit-button",onClick:t[5]||(t[5]=(...e)=>a.submitDrawing&&a.submitDrawing(...e))},"提交")])])}const C=h(v,[["render",I],["__scopeId","data-v-4c4bb4da"]]);export{C as default};
