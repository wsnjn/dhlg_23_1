import{_ as l,c as a,a as r,t as n,F as m,f as u,o as i}from"./index-C23T03Zw.js";const h={name:"WordMemoryTestPage",data(){return{wordBank:["蔚蓝","胖瘦","牛奶","天空","书本","电脑","手机","快乐","跑步","音乐","花园","茶杯","铅笔","沙发","窗户"],currentWords:[],timeLeft:5,timer:null}},computed:{formattedTime(){return`${this.timeLeft}秒`}},created(){this.generateRandomWords(),this.startTimer()},beforeUnmount(){this.clearTimer()},methods:{generateRandomWords(){const t=[...this.wordBank].sort(()=>.5-Math.random());this.currentWords=t.slice(0,3)},startTimer(){this.clearTimer(),this.timer=setInterval(()=>{this.timeLeft--,this.timeLeft<=0&&this.goToNextStep()},1e3)},clearTimer(){this.timer&&(clearInterval(this.timer),this.timer=null)},goBack(){this.$router.go(-1)},async goToNextStep(){this.clearTimer();try{const t=JSON.parse(localStorage.getItem("currentUser"));if(!t)throw new Error("用户未登录");if(!t.hospitalNumber||!t.name)throw new Error("用户信息不完整，缺少住院号或姓名");if(!(await fetch("http://172.22.104.102:8080/api/store-words",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:t.id||t.hospitalNumber,words:this.currentWords,hospitalNumber:t.hospitalNumber,name:t.name})})).ok)throw new Error("存储单词失败");this.$router.push("/draw")}catch(t){console.error("存储单词错误:",t),alert("存储单词失败: "+t.message)}}}},p={class:"word-memory-test-page"},f={class:"header"},g={class:"timer",style:{position:"absolute",left:"20px",top:"15px",color:"red","font-size":"24px","font-weight":"bold"}},w={class:"word-display"};function T(t,e,b,k,d,s){return i(),a("div",p,[r("div",f,[r("button",{class:"back-button",onClick:e[0]||(e[0]=(...o)=>s.goBack&&s.goBack(...o))},e[2]||(e[2]=[r("span",{class:"back-icon"},"←",-1)])),r("div",g,n(s.formattedTime),1)]),e[3]||(e[3]=r("div",{class:"instruction"}," 请快速说出随机词，确认记住以后请点击下一步 ",-1)),r("div",w,[(i(!0),a(m,null,u(d.currentWords,(o,c)=>(i(),a("div",{class:"word",key:c},n(o),1))),128))]),r("button",{class:"next-button",onClick:e[1]||(e[1]=(...o)=>s.goToNextStep&&s.goToNextStep(...o))}," 下一步 ")])}const y=l(h,[["render",T],["__scopeId","data-v-46c09929"]]);export{y as default};
